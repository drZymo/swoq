syntax = "proto3";

import "google/protobuf/empty.proto";
import "swoq.proto";

package Swoq.Interface;

service DashboardService {
    rpc GetUpdates(google.protobuf.Empty) returns (stream Update);
}

message QuestStarted {
    string gameId = 1;
    StartRequest request = 2;
    StartResponse response = 3;
}

message QuestActed {
    string gameId = 1;
    ActRequest request = 2;
    ActResponse response = 3;
}

message QueueUpdate {
    repeated string queuedUsers = 1;
}

message Session {
    string gameId = 1;
    string userName = 2;
    int32 level = 3;
    bool isQuest = 4;
    bool isActive = 5;
    bool isFinished = 6;
}

message SessionsUpdate {
    repeated Session sessions = 1;
}

message Score {
    string userName = 1;
    int32 level = 2;
    int32 lengthTicks = 3;
    int32 lengthSeconds = 4;
    bool questFinished = 5;
}

message ScoresUpdate {
    repeated Score scores = 1;
}

message StatisticsUpdate {
    float eventsPerSecond = 1;
}

message Update {
    optional QuestStarted questStarted = 1;
    optional QuestActed questActed = 2;
    optional QueueUpdate queueUpdate = 3;
    optional SessionsUpdate sessionsUpdate = 4;
    optional ScoresUpdate scoresUpdate = 5;
    optional StatisticsUpdate statisticsUpdate = 6;
}
